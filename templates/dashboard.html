{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π{% endblock %}

{% block content %}
<div class="dashboard">
    <h2>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</h2>
    
    <div class="generator-box">
        <form method="POST" action="{{ url_for('dashboard') }}">
            <div class="form-group">
                <label for="service">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞</label>
                <input type="text" id="service" name="service" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Gmail, Facebook" required>
            </div>
            
            <div class="form-group">
                <label for="length">–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è: <span id="length-value">12</span></label>
                <input type="range" id="length" name="length" min="6" max="32" value="12" oninput="document.getElementById('length-value').textContent = this.value">
            </div>
            
            <div class="complexity-options">
                <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</h4>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" name="uppercase" checked>
                        –ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã (A-Z)
                    </label>
                    <label>
                        <input type="checkbox" name="lowercase" checked>
                        –°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã (a-z)
                    </label>
                    <label>
                        <input type="checkbox" name="digits" checked>
                        –¶–∏—Ñ—Ä—ã (0-9)
                    </label>
                    <label>
                        <input type="checkbox" name="special" checked>
                        –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (!@#$%^&*)
                    </label>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>
    
    <div class="passwords-section">
        <h2>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏</h2>
        
        {% if passwords %}
        <div class="passwords-table">
            <table>
                <thead>
                    <tr>
                        <th>–°–µ—Ä–≤–∏—Å</th>
                        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                        <th>–ü–∞—Ä–æ–ª—å</th>
                        <th>–î–ª–∏–Ω–∞</th>
                        <th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th>
                        <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pwd in passwords %}
                    <tr>
                        <td>{{ pwd.service }}</td>
                        <td>{{ username }}</td>
                        <td class="password-cell">
                            <span class="password-hidden">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                            <span class="password-visible" style="display: none;">{{ pwd.password }}</span>
                            <button class="btn-toggle" onclick="togglePassword(this)">üëÅÔ∏è</button>
                            <button class="btn-copy" onclick="copyPassword('{{ pwd.password }}')">üìã</button>
                        </td>
                        <td>{{ pwd.length }}</td>
                        <td>{{ pwd.complexity }}</td>
                        <td>{{ pwd.timestamp }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="no-passwords">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –ø–∞—Ä–æ–ª—å!</p>
        {% endif %}
    </div>
</div>

<script>
function togglePassword(button) {
    const cell = button.parentElement;
    const hidden = cell.querySelector('.password-hidden');
    const visible = cell.querySelector('.password-visible');
    
    if (hidden.style.display === 'none') {
        hidden.style.display = 'inline';
        visible.style.display = 'none';
        button.textContent = 'üëÅÔ∏è';
    } else {
        hidden.style.display = 'none';
        visible.style.display = 'inline';
        button.textContent = 'üôà';
    }
}

function copyPassword(password) {
    navigator.clipboard.writeText(password).then(() => {
        alert('–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
    });
}
</script>
{% endblock %}
